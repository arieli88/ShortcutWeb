<!DOCTYPE html>
<html lang="he" dir="rtl" class="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>מערכת הצגת נתונים</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Load Fuse.js ESM and expose as global `window.Fuse` for non-bundled code -->
    <script type="module">
        import Fuse from 'https://cdn.jsdelivr.net/npm/fuse.js@6.6.2/dist/fuse.esm.min.js';
        // Expose globally for scripts that expect a global Fuse
        window.Fuse = Fuse.default || Fuse;
    </script>
    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.3.0/papaparse.min.js"></script>
    <link rel="stylesheet" href="./public/css/styles.css">
    <style>
        #loader {
            transition: opacity 0.3s;
        }

        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }

        .accordion-content.open {
            max-height: 2000px;
        }
    </style>
</head>

<body class="bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100">
    <header id="mainHeader"
        class="flex justify-between items-center p-4 bg-blue-600 dark:bg-blue-800 text-white shadow-md sticky top-0 z-40">
        <h1 class="text-xl font-bold">מערכת הצגת נתונים</h1>
        <div class="flex gap-3">
            <button id="toggleView"
                class="px-3 py-1 bg-white text-blue-700 rounded shadow hover:bg-gray-100 text-sm flex items-center">
                <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M4 6h16M4 10h16M4 14h16M4 18h16" />
                </svg>
                תצוגת טבלה
            </button>
            <button id="toggleDark"
                class="px-3 py-1 bg-white text-blue-700 rounded shadow hover:bg-gray-100 text-sm flex items-center">
                <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
                </svg>
                מצב כהה
            </button>
            <button id="addItem"
                class="px-3 py-1 bg-green-500 text-white rounded shadow hover:bg-green-600 text-sm flex items-center">
                הוספת פריט
            </button>
        </div>
    </header>

    <main class="container mx-auto p-4 pt-6">
        <div id="searchContainer" class="mb-4 sticky top-16 z-30 bg-transparent"></div>
        <div id="groupContainer" class="mt-4"></div>
    </main>

    <!-- Add popup overlay for formulas -->
    <div id="popupOverlay" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-50">
        <div class="bg-white dark:bg-gray-800 p-4 rounded shadow-lg w-11/12 max-w-2xl relative">
            <button id="popupClose" class="absolute top-2 left-2 text-red-600 font-bold">✖</button>
            <div id="popupTitle" class="font-bold text-lg mb-2"></div>
            <iframe class="w-full h-80 mt-2 border rounded"></iframe>
        </div>
    </div>

    <script type="module" src="./public/js/index.js"></script>
</body>

</html>